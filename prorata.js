var jsonData = 
{
	"Grupo": [{
		"grupoid": "1",
		"gruponame": "REGIÕES - R$108.41 - POPULAR: 0 a 10.000",
		"valor": 108.41
	}, {
		"grupoid": "2",
		"gruponame": "REGIÕES - R$122.22 - POP: 10.000,01 a 15.000",
		"valor": 122.22
	}, {
		"grupoid": "3",
		"gruponame": "REGIÕES - R$131.00 - GRUPO 1: 15.000,01 a 20.000",
		"valor": 131.00
	}, {
		"grupoid": "4",
		"gruponame": "REGIÕES - R$184.04 - GRUPO 2: 20.000,01 a 25.000",
		"valor": 184.04
	}, {
		"grupoid": "5",
		"gruponame": "REGIÕES - R$154.66 - GRUPO 3: 25.000,01 a 30.000",
		"valor": 154.66
	}, {
		"grupoid": "6",
		"gruponame": "REGIÕES - R$165.40 - GRUPO 4: 30.000,01 a 35.000",
		"valor": 165.40
	}, {
		"grupoid": "7",
		"gruponame": "REGIÕES - R$175.90 - GRUPO 5: 35.000,01 a 40.000",
		"valor": 175.90
	}, {
		"grupoid": "8",
		"gruponame": "REGIÕES - R$217.90 - GRUPO 6: 40.000,01 a 45.000",
		"valor": 217.90
	}, {
		"grupoid": "9",
		"gruponame": "REGIÕES - R$226.16 - GRUPO 7: 45.000,01 a 50.000",
		"valor": 226.16
	}, {
		"grupoid": "10",
		"gruponame": "REGIÕES - R$267.60 - GRUPO 8: 50.000,01 a 55.000",
		"valor": 267.60
	}, {
		"grupoid": "11",
		"gruponame": "REGIÕES - R$311.70 - GRUPO 9: 55.000,01 a 60.000",
		"valor": 311.70
	}, {
		"grupoid": "12",
		"gruponame": "REGIÕES - R$323.00 - GRUPO 10: 60.000,01 a 65.000",
		"valor": 323.00
	}, {
		"grupoid": "13",
		"gruponame": "REGIÕES - R$335.20 - GRUPO 11: 65.000,01 a 70.000",
		"valor": 335.20
	}, {
		"grupoid": "14",
		"gruponame": "REGIÕES - R$344.00 - GRUPO 12: 70.000,01 a 75.000",
		"valor": 344.00
	}, {
		"grupoid": "15",
		"gruponame": "REGIÕES - R$350.00 - GRUPO 13: 75.000,01 a 80.000",
		"valor": 350.00
	}, {
		"grupoid": "16",
		"gruponame": "REGIÕES - R$367.00 - GRUPO 14: 80.000,01 a 90.000",
		"valor": 367.00
	}, {
		"grupoid": "17",
		"gruponame": "REGIÕES - R$379.00 - GRUPO 15: 90.000,01 a 100.000",
		"valor": 379.00
	}, {
		"grupoid": "18",
		"gruponame": "RJ/SP - R$121.91 - POPULAR: 0 a 10.000",
		"valor": 121.91
	}, {
		"grupoid": "19",
		"gruponame": "RJ/SP - R$151.72 - POP: 10.000,01 a 15.000",
		"valor": 151.72
	}, {
		"grupoid": "20",
		"gruponame": "RJ/SP - R$169.50 - GRUPO 1: 15.000,01 a 20.000",
		"valor": 169.50
	}, {
		"grupoid": "21",
		"gruponame": "RJ/SP - R$184.04 - GRUPO 2: 20.000,01 a 25.000",
		"valor": 184.04
	}, {
		"grupoid": "22",
		"gruponame": "RJ/SP - R$206.13 - GRUPO 3: 25.000,01 a 30.000",
		"valor": 206.13
	}, {
		"grupoid": "23",
		"gruponame": "RJ/SP - R$224.90 - GRUPO 4: 30.000,01 a 35.000",
		"valor": 224.90
	}, {
		"grupoid": "24",
		"gruponame": "RJ/SP - R$238.20 - GRUPO 5: 35.000,01 a 40.000",
		"valor": 238.20
	}, {
		"grupoid": "25",
		"gruponame": "RJ/SP - R$271.40 - GRUPO 6: 40.000,01 a 45.000",
		"valor": 271.40
	}, {
		"grupoid": "26",
		"gruponame": "RJ/SP - R$296.66 - GRUPO 7: 45.000,01 a 50.000",
		"valor": 296.66
	}, {
		"grupoid": "27",
		"gruponame": "RJ/SP - R$317.10 - GRUPO 8: 50.000,01 a 55.000",
		"valor": 317.10
	}, {
		"grupoid": "28",
		"gruponame": "RJ/SP - R$333.20 - GRUPO 9: 55.000,01 a 60.000",
		"valor": 333.20
	}, {
		"grupoid": "29",
		"gruponame": "RJ/SP - R$354.50 - GRUPO 10: 60.000,01 a 65.000",
		"valor": 354.50
	}, {
		"grupoid": "30",
		"gruponame": "RJ/SP - R$369.70 - GRUPO 11: 65.000,01 a 70.000",
		"valor": 369.70
	}, {
		"grupoid": "31",
		"gruponame": "RJ/SP - R$391.00 - GRUPO 12: 70.000,01 a 75.000",
		"valor": 391.00
	}, {
		"grupoid": "32",
		"gruponame": "RJ/SP - R$395.02 - GRUPO 13: 75.000,01 a 80.000",
		"valor": 395.02
	}, {
		"grupoid": "33",
		"gruponame": "RJ/SP - R$402.00 - GRUPO 14: 80.000,01 a 90.000",
		"valor": 402.00
	}, {
		"grupoid": "34",
		"gruponame": "RJ/SP - R$413.00 - GRUPO 15: 90.000,01 a 100.000",
		"valor": 413.00
	}]
}; // fim do json
	

	// jQuery lista dropdown
	$(document).ready(function () 
	{
		var cotas = '<option selected="selected" value="0">- Grupo - Valor - Cota -</option>';

		for (var i = 0; i < jsonData.Grupo.length; i++) 
		{
			cotas += "<option value='" + jsonData.Grupo[i].valor + "'>" + jsonData.Grupo[i].gruponame + "</option>";
		}

		$("#Grupo").html(cotas);
	});
		
	
	function prorata()
	{
		var resultado;
		var data = document.getElementById("data").value;
		var [year, mon, day] = data.split('-'); // capturar dia e mês do input data
		var mensalidade = document.getElementById("Grupo").value;
		var diasUso;

		
		console.log("Mensalidade:", mensalidade, ", mês:", mon);


		if (mensalidade == 0)
		{
			swal("Selecione um grupo!");
		}
		else
		{
			// definindo quantidade de dias do mês (até dia 10)
			switch (mon)
			{
				case '02':
					diasUso = 39 - parseFloat(day);
					mon = 28;
					break;

				case '04':
				    diasUso = 41 - parseFloat(day);
				    mon = 30;
				break;

				case '06':
					diasUso = 41 - parseFloat(day);
					mon = 30;
					break;
				
				case '09':
					diasUso = 41 - parseFloat(day);
					mon = 30;
					break;

				case '11':
					diasUso = 41 - parseFloat(day);
					mon = 30;
					break;
			
				default:
					diasUso = 42 - parseFloat(day);	
					mon = 30;
					break;
			}             


			if (day >= "01" && day <= "04")
			{
					console.log("Adesão: ", day);
                day = 11 - day;
                    console.log("Dias de uso:", day, ", dias do mês:", mon);
				resultado = parseFloat(mensalidade) / parseFloat(mon);
					console.log("Mensal / mes = ", resultado.toFixed(2));
				resultado = resultado.toFixed(2) * day;
					console.log(", dias de uso: ", day, ", dias do mês:", mon);
					console.log("Prorata:", resultado);
				alert(resultado);
			}
			else
			{
				// valor fixo
				if (day >= "05" && day <= "10")
				{
					swal("O valor da prorata é de R$ 45.00");
						console.log("O valor da prorata é de R$ 45.00");
				}
				else
				{
					// Adesão em dia de fechamento
					if (day >= "11" && day <= "20")
					{
						swal("Data informada não gera pro rata!");
							console.log("Data informada não gera pro rata!");
					}
					else
					{
						if (day >= "21" && day <= "31")
						{
								console.log("Adesão: ", day);
								console.log("Dias de uso:", diasUso, ", dias do mês:", mon);			
							resultado = parseFloat(mensalidade) / parseFloat(mon);
								console.log("Mensal / mes = ", resultado.toFixed(2));
							resultado = resultado.toFixed(2) * diasUso;
								console.log("O valor da prorata é de R$ " + resultado.toFixed(2));

							alert(resultado);
						}
						else
						{
							swal("Data inválida!");
						}
					}
				}
			}
		}
	}	// fim da função  	


	function alert(resultado){

		if (resultado > 45)
		{
			swal("O valor da prorata é de R$ " + resultado.toFixed(2));
			console.log("O valor da prorata é de R$ " + resultado.toFixed(2));
		}
		else
		{
			swal("O valor da prorata é de R$ 45.00");
			console.log("O valor da prorata é de R$ 45.00");
		}
	}


// service-worker
	if ('serviceWorker' in navigator) 
	{
    navigator.serviceWorker
            .register('../service-worker.js')
			.then(function() { console.log('Service Worker Registered'); 
	});
	}